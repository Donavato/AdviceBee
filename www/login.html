<html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
    <!--initialize jquery from js folder-->
    <script src="js/jquery-3.3.1.min.js"></script>
    <!--reference style sheet-->
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1 class="h1">Please Sign In</h1>
    <br>
    <hr><br>
    <form>
        <input type="text" placeholder="Enter email" id="email" required>
        <br />
        <input type="password" placeholder="Enter password" id="passwrd" required>
        <br />
        <a href="pwreset.html" class="hyperlink">Forgot your password?</a><br>
        <br>
        <button type="button" id="submitReg">Sign In</button><br>
        <br>
        <p>Dont have one?<a href="register.html"> Create one now!</a></p>
    </form><br>

    

    <br>
    <nav class="nav">
        <a href="insert.html" class="link">Insert</a> |
        <a href="delete.html" class="link">Delete</a> |
        <a href="index.html" class="link">Show Data</a> |
        <a href="login.html" class="link">Login</a> |
        <a href="register.html" class="link">Register</a> |
        <a href="changepw.html" class="link">Change PW</a> |
        <a href="pwreset.html" class="link">Password Reset</a> |
        <a href="logout.html" class="link">Logout</a>
    </nav>
    <br><br>
    

    <div id="response">

    </div>
    <!-- FIX THE SUCCESS/FAIL RESPONSE TYPE -->
    <!--Implementation of jquery/ajax-->
    <script type="text/javascript">
        $('#submit').on('click', function (e) {
            e.preventDefault()
                var email = $("#email").val();
                var password = $("#passwrd").val();
                var dataString = "email=" + email +"&passwrd=" + password;
            $.ajax({
                url: "http://10.0.2.2/api/Account/login.php",
                type: "POST",
                // contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: dataString,
                success: function(data){
                    
                    if(data==true){
                        alert("Logged in Successfully");
                        window.location.replace("index.html");
                    }else{
                        console.log(data);
                        alert("Login Failed");
                    }
                    
                }, error: function(e){
                    alert(JSON.stringify(e));
                }
            });
        });
    </script>
</body>

</html>